"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","bootsnav","common","bootstrapPaginator"],function(t,e,r,a,i,o,n){function u(){}function c(e){o.dao.searchProducts({keyWord:e,currentPage:d.curPage,orderby:s,currencyId:o.util.getLocalCurrency()},function(e){if(e.page){d.amount=e.page.amount,d.pageSize=e.page.pageSize;var r=(d.curPage-1)*d.pageSize+1,a=d.curPage*d.pageSize;a>d.amount&&(a=d.amount),t("#current_product_number").html(r+"-"+a),t("#product_total_number").html(d.amount)}else t("#current_product_number").html("0-0"),t("#product_total_number").html(0);var i=e.products;i&&i.length>0?(p(i),g(i),1==d.curPage&&l(),t("#item_list").show(),t(".empty-data").hide()):(t("#item_list").hide(),t(".empty-data").show()),t(".sort-wrap").removeClass("invisibility")})}function p(e){var r=o.util.getCurrencySymbol(o.util.getLocalCurrency()),a=o.util.getAdvSource().u;a||(a=o.util.getQueryString("u"));var i=o.util.encodeMenuType(o.util.getUvid()),n="";a&&(n="?u="+a);for(var c=0;c<e.length;c++){for(var p=e[c],l=0;l<p.display_data.length;l++){var g=p.display_data[l];g.original_price=o.util.formatProductPrice(g.original_price,r),g.current_price=o.util.formatProductPrice(g.current_price,r),g.img_display=o.util.picUrl+g.img_display,g.color_img=o.util.picUrl+g.color_img,g.height=o.util.getImageHeight(),g.href=o.util.formatProductName(p.product_name)+"-d-"+o.util.encodeMenuType(p.product_id)+"-"+o.util.encodeMenuType(g.color_id)+"-"+i+".html"+n}p.showColor=sessionStorage.img_block}t("#item_list").html(t("#productItemTempl").tmpl(e)),u()}function l(){var e=0;e=d.amount%d.pageSize==0?d.amount/d.pageSize:d.amount/d.pageSize+1,t(function(){var r={bootstrapMajorVersion:1,currentPage:d.curPage,numberOfPages:5,totalPages:e,shouldShowPage:!0,onPageClicked:function(e,a,i,o){d.curPage!==o&&(t("html").scrollTop(0),d.curPage=o,c(m),r.currentPage=o,"top_page"==e.currentTarget.id?t("#page").bootstrapPaginator(r):t("#top_page").bootstrapPaginator(r))}};t("#page").bootstrapPaginator(r),t("#top_page").bootstrapPaginator(r)})}function g(e){t("#item_list .color-wrap img").bind("click",function(r){r.stopPropagation();var a=t(this).parent().parent().parent().data().data,i=t(this).data().data,o=e[a].display_data[i];t(this).parent().parent().find("img").removeClass("selected"),t(this).addClass("selected");var n=o.href;t(this).parent().parent().parent().find("a:first").attr("href",n),t(this).parent().parent().parent().find("img:first").attr("src",o.img_display),t(this).parent().parent().parent().find(".price-wrap .goods-price").html(o.current_price),t(this).parent().parent().parent().find(".price-wrap .goods-del-price").html(o.original_price)})}console.log("list.js"),o.initLoginStatus();var s=1,d={amount:0,curPage:1,pageSize:0};setTimeout(function(){t("#sort_method").html(t("#sort_list li a:first")[0].text),t("#sort_list li a").bind("click",function(){t("#sort_method").html(t(this)[0].text),d.curPage=1,s=Number(t(this)[0].id),c(m)})},50);var m=o.util.getQueryString("keyword");t("#keywordSpan").html(m),t("#search_input").val(m),o.setCurrencyCodeCallback(function(){c(m)})});