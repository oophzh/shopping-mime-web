"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","bootsnav","common"],function(r,e,s,i,a,t){function o(e){if(sessionStorage.setItem("userId",e.userId),sessionStorage.setItem("userInfo",JSON.stringify(e)),r("#login_btn").text(r.i18n.map.Logout),localStorage.productList){for(var s=JSON.parse(localStorage.productList),i=0;i<s.length;i++)s[i].userId=e.userId;t.dao.merge2cart({inputParams:JSON.stringify(s)},function(r){localStorage.productList="",n()},function(r){alert(r.msg)})}else n()}function n(){var r={currencyId:t.util.getLocalCurrency(),userId:t.util.getUserId(),cart:[],applyCpNo:t.util.getCouponCode()};t.dao.shoppingCart({inputParams:JSON.stringify(r)},function(r){r.cart&&r.cart.length>0?window.location.href="../../../shopping_cart.html":window.history.back(-1)})}function l(e,s){var i=t.util.checkEmail(r(e).val());return console.log(i),1!==i?(r(e).parent().removeClass("has-success"),r(e).parent().addClass("has-error"),r(s).show(),!1):(r(e).parent().removeClass("has-error"),r(e).parent().addClass("has-success"),r(s).hide(),!0)}function _(e,s){var i=t.util.checkPassword(r(e).val());return console.log(i),1!==i?(r(e).parent().removeClass("has-success"),r(e).parent().addClass("has-error"),r(s).show(),!1):(r(e).parent().removeClass("has-error"),r(e).parent().addClass("has-success"),r(s).hide(),!0)}console.log("login.js"),function(){r("#agree_input").change(function(){r(this)[0].checked?r("#register_error_agree").hide():r("#register_error_agree").show()}),r("#commit_login_btn").click(function(){var e=l("#login_email_input","#login_error_email"),s=_("#login_pwd_input","#login_error_pwd");e&&s&&(r(".loading-mask").removeClass("hide"),r("#error_message").hide(),t.dao.login({email:r("#login_email_input").val(),userPwd:r("#login_pwd_input").val()},function(r){console.log("登录成功"),o(r)},function(e){r("#error_message").html(e.msg),r("#error_message").show()},function(){r(".loading-mask").addClass("hide")}))}),r("#register_btn").click(function(){var e=l("#register_email_input","#register_error_confirm_email"),s=_("#register_pwd_input","#register_error_pwd");if(s=_("#register_confirm_pwd_input","#register_error_confirm_pwd"),r("#register_pwd_input").val()!==r("#register_confirm_pwd_input").val()&&(r("#error_message").html(r.i18n.map.PasswordNotMatch),r("#error_message").show(),s=!1),!r("#agree_input")[0].checked)return void r("#register_error_agree").show();if(r("#register_error_agree").hide(),e&&s){r(".loading-mask").removeClass("hide"),r("#error_message").hide();var i=r("input[type='radio'][name='gender']:checked").val();t.dao.register({inputParams:JSON.stringify({email:r("#register_email_input").val(),userPwd:r("#register_pwd_input").val(),sex:i,firstName:"",lastName:""})},function(r){o(r)},function(e){r("#error_message").html(e.msg),r("#error_message").show()},function(){r(".loading-mask").addClass("hide")})}})}(),function(){r("#login_email_input").blur(function(){var e=t.util.checkEmail(r(this).val());console.log(e),0==e?(r(this).parent().removeClass("has-success"),r(this).parent().addClass("has-error"),r("#login_error_email").show()):-1==e?(r(this).parent().removeClass("has-success"),r(this).parent().addClass("has-error"),r("#login_error_email").show()):1==e&&(r(this).parent().removeClass("has-error"),r(this).parent().addClass("has-success"),r("#login_error_email").hide())}),r("#login_pwd_input").blur(function(){var e=t.util.checkPassword(r(this).val());console.log(e),0==e?(r(this).parent().removeClass("has-success"),r(this).parent().addClass("has-error"),r("#login_error_pwd").show()):-1==e?(r(this).parent().removeClass("has-success"),r(this).parent().addClass("has-error"),r("#login_error_pwd").show()):1==e&&(r(this).parent().removeClass("has-error"),r(this).parent().addClass("has-success"),r("#login_error_pwd").hide())})}(),function(){r("#register_email_input").blur(function(){var e=t.util.checkEmail(r(this).val());console.log(e),0==e?(r(this).parent().removeClass("has-success"),r(this).parent().addClass("has-error"),"register_email_input"==r(this)[0].id?r("#register_error_email").show():"register_confirm_email_input"==r(this)[0].id&&r("#register_error_confirm_email").show()):-1==e?(r(this).parent().removeClass("has-success"),r(this).parent().addClass("has-error"),"register_email_input"==r(this)[0].id?r("#register_error_email").show():"register_confirm_email_input"==r(this)[0].id&&r("#register_error_confirm_email").show()):1==e&&(r(this).parent().removeClass("has-error"),r(this).parent().addClass("has-success"),"register_email_input"==r(this)[0].id?r("#register_error_email").hide():"register_confirm_email_input"==r(this)[0].id&&r("#register_error_confirm_email").hide())}),r("#register_pwd_input, #register_confirm_pwd_input").blur(function(){var e=t.util.checkPassword(r(this).val());console.log(e),0==e?(r(this).parent().removeClass("has-success"),r(this).parent().addClass("has-error"),"register_pwd_input"==r(this)[0].id?r("#register_error_pwd").show():"register_confirm_pwd_input"==r(this)[0].id&&r("#register_error_confirm_pwd").show()):-1==e?(r(this).parent().removeClass("has-success"),r(this).parent().addClass("has-error"),"register_pwd_input"==r(this)[0].id?r("#register_error_pwd").show():"register_confirm_pwd_input"==r(this)[0].id&&r("#register_error_confirm_pwd").show()):1==e&&(r(this).parent().removeClass("has-error"),r(this).parent().addClass("has-success"),"register_pwd_input"==r(this)[0].id?r("#register_error_pwd").hide():"register_confirm_pwd_input"==r(this)[0].id&&r("#register_error_confirm_pwd").hide())}),r("#register_first_name_input").blur(function(){r("#register_first_name_input").val()?(r(this).parent().removeClass("has-error"),r(this).parent().addClass("has-success"),r("#register_error_first_name").hide()):(r(this).parent().removeClass("has-success"),r(this).parent().addClass("has-error"),r("#register_error_first_name").show())}),r("#register_last_name_input").blur(function(){r("#register_last_name_input").val()?(r(this).parent().removeClass("has-error"),r(this).parent().addClass("has-success"),r("#register_error_last_name").hide()):(r(this).parent().removeClass("has-success"),r(this).parent().addClass("has-error"),r("#register_error_last_name").show())})}(),localStorage&&localStorage.selectedLanguage&&r("#policy_url").attr("href",JSON.parse(localStorage.selectedLanguage).langCode+"/privacy.html"),t.setLanguageCallback(function(e){r("#policy_url").attr("href",e+"/privacy.html")})});