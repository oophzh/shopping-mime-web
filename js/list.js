"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","bootsnav","common","bootstrapPaginator"],function(t,e,a,i,n,r,o){function s(){t("#menu_icon").click(function(){t("body").css("overflow","hidden"),t("#menu_mask").removeClass("hide")}),t("#menu_mask").click(function(){t("body").css("overflow","auto"),t("#menu_mask").addClass("hide")}),t("#prev_btn").unbind("click").click(function(){g.curPage>1&&(g.curPage=g.curPage-1,t("html").scrollTop(0),l()),t("#page").bootstrapPaginator("showPrevious"),t("#top_page").bootstrapPaginator("showPrevious")}),t("#next_btn").unbind("click").click(function(){var e=0;e=g.amount%g.pageSize==0?parseInt(g.amount/g.pageSize):parseInt(g.amount/g.pageSize)+1,g.curPage<e&&(g.curPage=g.curPage+1,t("html").scrollTop(0),l()),t("#page").bootstrapPaginator("showNext"),t("#top_page").bootstrapPaginator("showNext")})}function u(){if(r.util.menu&&r.util.menu.length>0){var e=r.util.getAdvSource().u;e||(e=r.util.getQueryString("u"));var a="";e&&(a="?u="+e);for(var i=r.util.menu.reverse(),n="<li><a id='breadcrumb_home' href='/'>"+t.i18n.map.Home+"</a></li>",o=0;o<i.length;o++){var s=i[o].menu_name+"-l-"+r.util.encodeMenuType(i[o].menu_type)+"-"+r.util.encodeMenuType(r.util.getUvid())+".html"+a;o==i.length-1?(n=n+"<li class='active'><a href='"+s+"'>"+i[o].menu_name+"</a></li>",t("#product_classify_name").html(i[o].menu_name),document.title=i[o].menu_name):n=n+"<li><a href='"+s+"'>"+i[o].menu_name+"</a></li>"}t(".breadcrumb").html(n)}}function l(){t("#list_loading").removeClass("hide"),r.dao.categoryProducts({productType:_,currentPage:g.curPage,orderby:m,currencyId:r.util.getLocalCurrency()},function(e){if(e.page){g.amount=e.page.amount,g.pageSize=e.page.pageSize;var a=(g.curPage-1)*g.pageSize+1,i=g.curPage*g.pageSize;i>g.amount&&(i=g.amount),t("#current_product_number").html(a+"-"+i),t("#product_total_number").html(g.amount)}else t("#current_product_number").html("0-0"),t("#product_total_number").html(0);var n=e.products;if(n&&n.length>0?(c(n),d(n),1==g.curPage&&p(),t("#item_list").show(),t(".empty-data").hide()):(t("#item_list").hide(),t(".empty-data").show()),t(".sort-wrap").removeClass("invisibility"),sessionStorage.menus&&!r.util.isMobile()){var o=JSON.parse(sessionStorage.menus);if(o){t("#classify_list_wrap").html(t("#classifyListTempl").tmpl(o)),t("#classify_list_wrap a").each(function(){var e=r.util.getAdvSource().u,a=t(this).attr("href");if(a&&a.indexOf("-l-")>-1){var i=r.util.getListParams(a),n=i[i.length-2];n=r.util.encodeMenuType(n);var o=r.util.encodeMenuType(r.util.getUvid());e||(e=r.util.getQueryString("u"));var s="";e&&(s="?u="+e);var u=a.substring(0,a.indexOf("-l-")),l=r.util.formatProductName(u)+"-l-"+n+"-"+o+".html"+s;a=l,t(this).attr("href",l)}});for(var s=t("#classify_list_wrap span"),u=0;u<s.length;u++){s[u].id==_?t(s[u]).addClass("selected"):t(s[u]).removeClass("selected");for(var l=0;l<r.util.menu.length;l++)if(s[u].id==r.util.menu[l].menu_type){"classify_list_wrap"!==t(s[u]).parent().parent().parent().parent()[0].id&&"div"!==t(s[u]).parent().parent().parent().parent()[0].tagName.toLowerCase()&&(t(s[u]).parent().parent().parent().parent().find("ul:first").removeClass("hide"),t(s[u]).parent().parent().parent().parent().find(".icon-jiantou-xia-cuxiantiao:first").addClass("icon-jiantou-shang-cuxiantiao"),t(s[u]).parent().parent().parent().parent().find(".icon-jiantou-xia-cuxiantiao:first").removeClass("icon-jiantou-xia-cuxiantiao"));break}}t("#classify_list_wrap #arrow_icon").bind("click",function(){t(this).find("i").hasClass("icon-jiantou-xia-cuxiantiao")?(t(this).parent().parent().parent().find("ul:first").removeClass("hide"),t(this).find("i").removeClass("icon-jiantou-xia-cuxiantiao"),t(this).find("i").addClass("icon-jiantou-shang-cuxiantiao")):(t(this).parent().parent().parent().find("ul:first").addClass("hide"),t(this).find("i").addClass("icon-jiantou-xia-cuxiantiao"),t(this).find("i").removeClass("icon-jiantou-shang-cuxiantiao"))})}}else if(sessionStorage.menus&&r.util.isMobile()){t("#classify_list_wrap_parent").hide();var o=JSON.parse(sessionStorage.menus);if(o){t("#menu_list_wrap").html(t("#menuListTempl").tmpl(o)),t("#menu_list_wrap a").each(function(){event.stopPropagation();var e=r.util.getAdvSource().u,a=t(this).attr("href");if(a&&a.indexOf("-l-")>-1){var i=r.util.getListParams(a),n=i[i.length-2];n=r.util.encodeMenuType(n);var o=r.util.encodeMenuType(r.util.getUvid());e||(e=r.util.getQueryString("u"));var s="";e&&(s="?u="+e);var u=a.substring(0,a.indexOf("-l-")),l=r.util.formatProductName(u)+"-l-"+n+"-"+o+".html"+s;a=l,t(this).attr("href",l)}});for(var s=t("#menu_list_wrap span"),u=0;u<s.length;u++){s[u].id==_?t(s[u]).addClass("selected"):t(s[u]).removeClass("selected");for(var l=0;l<r.util.menu.length;l++)if(s[u].id==r.util.menu[l].menu_type){"menu_list_wrap"!==t(s[u]).parent().parent().parent().parent()[0].id&&"div"!==t(s[u]).parent().parent().parent().parent()[0].tagName.toLowerCase()&&(t(s[u]).parent().parent().parent().parent().find("ul:first").removeClass("hide"),t(s[u]).parent().parent().parent().parent().find(".icon-jiantou-xia-cuxiantiao:first").addClass("icon-jiantou-shang-cuxiantiao"),t(s[u]).parent().parent().parent().parent().find(".icon-jiantou-xia-cuxiantiao:first").removeClass("icon-jiantou-xia-cuxiantiao"));break}}t("#menu_list_wrap #arrow_icon").bind("click",function(){event.stopPropagation(),t(this).find("i").hasClass("icon-jiantou-xia-cuxiantiao")?(t(this).parent().parent().parent().find("ul:first").removeClass("hide"),t(this).find("i").removeClass("icon-jiantou-xia-cuxiantiao"),t(this).find("i").addClass("icon-jiantou-shang-cuxiantiao")):(t(this).parent().parent().parent().find("ul:first").addClass("hide"),t(this).find("i").addClass("icon-jiantou-xia-cuxiantiao"),t(this).find("i").removeClass("icon-jiantou-shang-cuxiantiao"))})}}t(".loading-mask").addClass("hide"),t(".main-wrap").removeClass("invisibility"),t("footer").removeClass("invisibility")},null,function(){t(".loading-mask").addClass("hide"),t(".main-wrap").removeClass("invisibility"),t("footer").removeClass("invisibility"),t("#list_loading").addClass("hide")})}function c(e){var a=r.util.getCurrencySymbol(r.util.getLocalCurrency()),i=r.util.getAdvSource().u;i||(i=r.util.getQueryString("u"));var n=r.util.encodeMenuType(r.util.getUvid()),o="";i&&(o="?u="+i);for(var u=0;u<e.length;u++){for(var l=e[u],c=0;c<l.display_data.length;c++){var p=l.display_data[c];p.original_price=r.util.formatProductPrice(p.original_price,a),p.current_price=r.util.formatProductPrice(p.current_price,a),p.img_display=r.util.picUrl+p.img_display,p.color_img=r.util.picUrl+p.color_img,p.height=r.util.getImageHeight(),p.href=r.util.formatProductName(l.product_name)+"-d-"+r.util.encodeMenuType(l.product_id)+"-"+r.util.encodeMenuType(p.color_id)+"-"+n+".html"+o}l.showColor=sessionStorage.img_block}t("#item_list").html(t("#productItemTempl").tmpl(e)),s()}function p(){var e=0;e=g.amount%g.pageSize==0?g.amount/g.pageSize:g.amount/g.pageSize+1,t(function(){var a={bootstrapMajorVersion:1,currentPage:g.curPage,numberOfPages:5,totalPages:e,shouldShowPage:!0,onPageClicked:function(e,i,n,r){g.curPage!==r&&(g.curPage=r,t("html").scrollTop(0),l(),a.currentPage=r,"top_page"==e.currentTarget.id?t("#page").bootstrapPaginator(a):t("#top_page").bootstrapPaginator(a))}};t("#page").bootstrapPaginator(a),t("#top_page").bootstrapPaginator(a)})}function d(e){t("#item_list .color-wrap img").bind("click",function(a){a.stopPropagation();var i=t(this).parent().parent().parent().data().data,n=t(this).data().data,r=e[i].display_data[n];t(this).parent().parent().find("img").removeClass("selected"),t(this).addClass("selected");var o=r.href;t(this).parent().parent().parent().find("a:first").attr("href",o),t(this).parent().parent().parent().find("img:first").attr("src",r.img_display),t(this).parent().parent().parent().find(".product-name").html(r.pcName),t(this).parent().parent().parent().find(".product-ext-name").html(r.pcNameExt),t(this).parent().parent().parent().find(".price-wrap .goods-price").html(r.current_price),t(this).parent().parent().parent().find(".price-wrap .goods-del-price").html(r.original_price)})}console.log("list.js"),r.util.getCookie("isFirst")||(r.util.setCookie("isFirst",0),t(".loading-mask").removeClass("hide")),r.initLoginStatus(),r.setLanguageCallback(function(){t("#breadcrumb_home").text(t.i18n.map.Home),t("#sort_method").html(t.i18n.map.SortRecommended)});var m=1,g={amount:0,curPage:1,pageSize:0},h=window.location.href,f=r.util.getListParams(h),_=r.util.decodeMenuType(f[f.length-2]);r.util.menu=[],r.util.getClassifyNames(_,function(){u(),t("#sort_method").html(t.i18n.map.SortRecommended)}),r.util.isMobile()?(t("#menu_icon").removeClass("hide"),t("#breadcrumb").css("height","50px"),t("#breadcrumb").css("padding","15px"),t("#prev_btn").show(),t("#next_btn").show()):(t("#menu_icon").addClass("hide"),t("#prev_btn").hide(),t("#next_btn").hide()),t("#sort_method").html(t.i18n.map.SortRecommended),t("#sort_list li a").bind("click",function(){t("#sort_method").html(t(this)[0].text),g.curPage=1,m=Number(t(this)[0].id),l()}),r.setCurrencyCodeCallback(function(){l(_)})});